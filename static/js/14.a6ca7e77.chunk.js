(this["webpackJsonpys-main-web"]=this["webpackJsonpys-main-web"]||[]).push([[14],{1008:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(76),c=a(6),i=a(9),o=a(151),s=a(26),m=a(143),f=a(883),u=a(805),d=a(859),p=a(811),b=a(3),g=a(934),E=a(2),v=(a(1),a(8)),h=l.a.forwardRef((function(e,t){return l.a.createElement(m.a,Object(E.a)({component:"p",variant:"body1",color:"textSecondary",ref:t},e))})),x=Object(v.a)({root:{marginBottom:16}},{name:"MuiDialogContentText"})(h),N=a(967),j=a(968),O=a(879),y=a(818),w=a(881),k=a(296),C=a(13),I=a(389),P=a(814),S=a(860),L=a(873),W=a(864);var T=function(e){var t=Object(c.b)(),a=Object(c.c)((function(e){return e.staffList.selectedStaffIds})),r=Object(n.useState)(null),i=Object(s.a)(r,2),o=i[0],m=i[1];function f(){m(null)}return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{className:"p-0","aria-owns":o?"selectedStaffsMenu":null,"aria-haspopup":"true",onClick:function(e){m(e.currentTarget)}},l.a.createElement(d.a,null,"more_horiz")),l.a.createElement(I.a,{id:"selectedStaffsMenu",anchorEl:o,open:Boolean(o),onClose:f},l.a.createElement(P.a,null,l.a.createElement(S.a,{onClick:function(){t(C.l(a)),f()}},l.a.createElement(L.a,{className:"min-w-40"},l.a.createElement(d.a,null,"delete")),l.a.createElement(W.a,{primary:"Remove"})))))},D=a(293),_=a(46);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var R=Object(w.a)((function(e){return{logoImgWrapper:{width:"1.5em"},unLinkImg:{filter:"grayscale(100%)"}}})),F=l.a.forwardRef((function(e,t){return l.a.createElement(y.a,Object.assign({direction:"up",ref:t},e))}));var H=function(e){var t=R(),a=Object(c.b)(),E=Object(c.c)((function(e){return e.staffList.totalPages})),v=Object(c.c)((function(e){return e.staffList.docs})),h=Object(c.c)((function(e){return e.staffList.selectedStaffIds})),y=Object(c.c)((function(e){return e.staffList.searchText})),w=Object(n.useState)(null),I=Object(s.a)(w,2),P=I[0],S=I[1];return Object(n.useEffect)((function(){v&&S(function(e,t){var a=Object.keys(e).map((function(t){return e[t]}));return 0===t.length?a:r.w.filterArrayByString(a,t)}(v,y))}),[v,y]),P?0===P.length?l.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},l.a.createElement(m.a,{color:"textSecondary",variant:"h5"},"\u6c92\u6709\u7b26\u5408\u689d\u4ef6\u7684\u54e1\u5de5 ...")):l.a.createElement(r.a,{animation:"transition.slideUpIn",delay:300},l.a.createElement(k.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:function(e,t,n){return{className:"cursor-pointer",onClick:function(e,n){if(t){a(C.x(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},function(e){e._id,e.shortcuts,e.google,e.facebook,e.updatedAt,e.createdAt;return Object(o.a)(e,["_id","shortcuts","google","facebook","updatedAt","createdAt"])}(t.original),{id:t.original._id})))}}}},data:P,columns:[{Header:function(){return l.a.createElement(f.a,{onClick:function(e){e.stopPropagation()},onChange:function(e){e.target.checked?a(C.D()):a(C.j())},checked:h.length===v.length&&h.length>0,indeterminate:h.length!==v.length&&h.length>0})},accessor:"",Cell:function(e){return l.a.createElement(f.a,{onClick:function(e){e.stopPropagation()},checked:h.includes(e.value._id),onChange:function(){return a(C.Z(e.value._id))}})},className:"justify-center",sortable:!1,width:64},{Header:function(){return h.length>0&&l.a.createElement(T,null)},accessor:"photoURL",Cell:function(e){return l.a.createElement("div",{className:"flex justify-around items-center w-full"},l.a.createElement("p",{className:"font-600 text-white text-lg"},"# ",e.index),l.a.createElement(u.a,{className:"mr-8",alt:e.original.name,src:Object(_.a)(e.value)}))},className:"justify-center",sortable:!1,minWidth:100},{Header:"\u540d\u7a31",accessor:"displayName",Cell:function(e){var t=e.value;return l.a.createElement("span",{className:"text-600 text-white text-lg"},t)},className:"flex items-center justify-center font-bold",minWidth:128},{Header:"\u4fe1\u7bb1",accessor:"email",className:"flex items-center justify-center",minWidth:180},{Header:"\u7d81\u5b9a Google",accessor:"google",Cell:function(e){return l.a.createElement("div",{className:t.logoImgWrapper},null==e.original.google?l.a.createElement("img",{className:t.unLinkImg,alt:"google Icon",src:Object(_.i)("google")}):l.a.createElement("img",{alt:"google Icon",src:Object(_.i)("google")}))},className:"flex items-center justify-center font-bold",minWidth:128},{Header:"\u7d81\u5b9a Facebook",accessor:"facebook",Cell:function(e){return l.a.createElement("div",{className:t.logoImgWrapper},null==e.original.facebook?l.a.createElement("img",{className:t.unLinkImg,alt:"google Icon",src:Object(_.i)("facebook")}):l.a.createElement("img",{alt:"google Icon",src:Object(_.i)("facebook")}))},className:"flex items-center justify-center font-bold",minWidth:128},{Header:"\u901a\u904e\u9a57\u8b49",accessor:"verified",Cell:function(e){return e.original.verified?l.a.createElement(d.a,{className:"text-green pr-10"},"check_circle"):l.a.createElement(d.a,{className:"text-yellow pr-10"},"cancel")},className:"flex items-center justify-center font-bold"},{Header:"\u555f\u7528\u72c0\u614b",Cell:function(e){return l.a.createElement("div",{className:"flex items-center"},l.a.createElement(p.a,{onClick:function(t){t.stopPropagation();var n=e.original;!function(e){var t=e._id,n=e.displayName,r=e.email,c=e.active;a(C.w({children:l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,{id:"alert-dialog-title",className:"text-center text-lg"},c?"\u7981\u7528\u54e1\u5de5 ".concat(n," \u7684\u5e33\u865f\uff1f"):"\u555f\u7528\u54e1\u5de5 ".concat(n," \u7684\u5e33\u865f\uff1f")),l.a.createElement(g.a,null,l.a.createElement(x,{id:"alert-dialog-description",className:"font-semibold text-lg text-center"},c?"\u8acb\u6ce8\u610f\uff0c\u60a8\u78ba\u5b9a\u8981 \u7981\u7528\u54e1\u5de5 ".concat(n," \u7684\u5e33\u865f \u55ce\uff1f"):"\u8acb\u6ce8\u610f\uff0c\u60a8\u78ba\u5b9a\u8981 \u555f\u7528\u54e1\u5de5 ".concat(n," \u7684\u5e33\u865f \u55ce\uff1f"))),l.a.createElement(j.a,{className:"justify-center"},l.a.createElement(O.a,{onClick:function(){return a(C.f())},autoFocus:!0,className:"text-gray-700 rounded-full"},"\u53d6\u6d88"),l.a.createElement(O.a,{onClick:function(){return a(C.bb({userId:t,email:r,active:!c}))},className:Object(b.a)(c?"text-red":"text-green","rounded-full")},"\u78ba\u5b9a"))),TransitionComponent:F}))}({_id:n._id,displayName:n.displayName,email:n.email,active:n.active})}},e.original.active?l.a.createElement(d.a,{className:"text-green"},"lock_open"):l.a.createElement(d.a,{className:"text-red"},"lock")))},className:"flex items-center justify-center font-bold"}],defaultPageSize:20,noDataText:"\u6c92\u6709\u7b26\u5408\u689d\u4ef6\u7684\u54e1\u5de5",showPageSizeOptions:!1,showPageJump:!1,pageText:"",ofText:"\uff0c",pages:E,renderCurrentPage:function(e){return l.a.createElement("span",null,"\u7b2c ",e+1," \u9801")},renderTotalPagesCount:function(e){return l.a.createElement("span",null,"\u5171 ",e," \u9801")},onFetchData:function(e){var t,n=e.page;t=n+2,v.length<20*t&&a(C.eb({filter:"staff",fields:"role",page:t,limit:20,sort:"displayName",order:-1}))}})):l.a.createElement("div",{className:"flex justify-center items-center"},l.a.createElement(D.a,{width:"128",height:"128"}))},A=a(165),B=a(810),U=a(861);var z=function(e){var t=Object(c.b)(),a=Object(c.c)((function(e){return e.staffList.searchText})),n=Object(c.c)((function(e){return e.staffList.totalStaffs})),i=Object(c.c)((function(e){return e.fuse.settings.mainTheme}));return l.a.createElement("div",{className:"flex flex-1 items-center justify-between p-8 sm:p-24"},l.a.createElement("div",{className:"flex flex-shrink items-center sm:w-224 justify-center xs:justify-end"},l.a.createElement("div",{className:"flex items-center"},l.a.createElement(r.a,{animation:"transition.slideLeftIn",delay:300},l.a.createElement(m.a,{variant:"h6",className:"hidden sm:flex"},"\u54e1\u5de5\u5217\u8868")))),l.a.createElement("div",{className:"flex flex-1 items-center justify-left pr-8 sm:px-12"},l.a.createElement(U.a,{theme:i},l.a.createElement(r.a,{animation:"transition.slideLeftIn",delay:300},l.a.createElement(A.a,{className:"flex p-4 items-center w-full max-w-512 px-8 py-4 rounded-full",elevation:1},l.a.createElement(d.a,{className:"mr-8",color:"action"},"search"),l.a.createElement(B.a,{placeholder:"\u641c\u5c0b\u54e1\u5de5 (\u540d\u7a31\u3001\u4fe1\u7bb1)",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:a,inputProps:{"aria-label":"Search"},onChange:function(e){return t(C.G(e))}}))))),l.a.createElement("div",{className:"flex flex-shrink items-center justify-center xs:justify-end"},l.a.createElement("div",{className:"flex items-center"},l.a.createElement(r.a,{animation:"transition.slideLeftIn",delay:300},l.a.createElement(m.a,{className:"text-11 font-600 rounded-12 text-white bg-blue px-8 py-4 sm:mr-12"},n+" \u4f4d\u54e1\u5de5")))))},J=a(875),G=a(877),q=a(871),V=a(880),Y=a(144),Z={id:"",role:"staff",displayName:"",email:"",photoURL:"assets/images/avatars/profile.jpg",verified:!1,google:"",facebook:""},K=Object(v.a)({root:{"& label.Mui-focused":{color:"#ffffff"},"& .MuiInput-underline:after":{borderBottomColor:"#fefefe"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#fefefe"},"&:hover fieldset":{borderColor:"#ffffff"},"&.Mui-focused fieldset":{borderColor:"#ffffff"}},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"2.4rem"}}})(J.a);var Q=function(e){var t=Object(c.b)(),a=Object(c.c)((function(e){return e.staffList.staffInfoDialog})),r=Object(Y.c)(Z),i=r.form,o=r.handleChange,s=r.setForm,f=Object(n.useCallback)((function(){s(a.data)}),[a.data,s]);function b(){t(C.g())}function E(e){e.preventDefault();var a=i.id,n=i.email,l=i.role;t(C.fb({staffId:a,email:n,role:l})),b()}return Object(n.useEffect)((function(){a.props.open&&f()}),[a.props.open,f]),l.a.createElement(G.a,Object.assign({classes:{paper:"m-24"}},a.props,{onClose:b,fullWidth:!0,maxWidth:"xs"}),l.a.createElement(q.a,{position:"static",elevation:1},l.a.createElement(V.a,{className:"flex w-full"},l.a.createElement(m.a,{variant:"subtitle1",color:"inherit"},"\u54e1\u5de5\u8cc7\u6599")),l.a.createElement("div",{className:"flex flex-col items-center justify-center pb-24"},l.a.createElement(u.a,{className:"w-96 h-96",alt:"staff avatar",src:i.photoURL}),l.a.createElement(m.a,{variant:"h6",color:"inherit",className:"pt-8"},i.displayName))),l.a.createElement("form",{noValidate:!0,onSubmit:E,className:"flex flex-col md:overflow-hidden"},l.a.createElement(g.a,{classes:{root:"p-24"}},l.a.createElement(m.a,{variant:"h6",color:"inherit",className:"pb-24 text-center"},i.id),l.a.createElement("div",{className:"flex"},l.a.createElement("div",{className:"min-w-36 pt-20"},l.a.createElement(d.a,{color:"action"},"account_circle")),l.a.createElement(K,{className:"mb-24",label:"\u540d\u7a31",autoFocus:!0,id:"displayName",name:"displayName",value:i.displayName,variant:"outlined",required:!0,InputProps:{readOnly:!0},fullWidth:!0})),l.a.createElement("div",{className:"flex"},l.a.createElement("div",{className:"min-w-36 pt-20"},l.a.createElement(d.a,{color:"action"},"mail")),l.a.createElement(K,{className:"mb-24",label:"\u4fe1\u7bb1",id:"email",name:"email",value:i.email,variant:"outlined",InputProps:{readOnly:!0},fullWidth:!0})),l.a.createElement("div",{className:"flex"},l.a.createElement("div",{className:"min-w-36 pt-20"},l.a.createElement(d.a,{color:"action"},"group")),l.a.createElement(K,{select:!0,className:"mb-24",label:"\u6b0a\u9650",id:"role",name:"role",value:i.role,onChange:o,variant:"outlined",fullWidth:!0},l.a.createElement(S.a,{className:"rounded-full",value:"user"},"\u6703\u54e1"),l.a.createElement(S.a,{className:"rounded-full",value:"staff"},"\u54e1\u5de5")))),l.a.createElement(j.a,{className:"justify-between pl-16"},l.a.createElement(p.a,{onClick:function(){var e=i.id,a=i.email,n=i.active;t(C.bb({staffId:e,email:a,active:!n})),b()}},i.active?l.a.createElement(d.a,{className:"text-green"},"lock_open"):l.a.createElement(d.a,{className:"text-red"},"lock")),l.a.createElement(O.a,{className:"rounded-full",variant:"contained",color:"primary",type:"submit",onClick:E,disabled:!(i.displayName.length>0)},"\u8b8a\u66f4"))))};t.default=function(e){var t=Object(c.b)(),a=Object(n.useRef)(null);return Object(n.useEffect)((function(){t(C.p({filter:"staff",fields:"role",page:1,limit:20,sort:"displayName",order:-1}))}),[t]),l.a.createElement(l.a.Fragment,null,l.a.createElement(r.n,{classes:{contentWrapper:"p-0 sm:p-24 pb-20 h-full",content:"flex flex-col h-full",leftSidebar:"w-256 border-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:l.a.createElement(z,{pageLayout:a}),content:l.a.createElement(H,null),sidebarInner:!0,ref:a}),l.a.createElement(Q,null))}},934:function(e,t,a){"use strict";var n=a(2),l=a(5),r=a(0),c=a.n(r),i=(a(1),a(3)),o=a(8),s=c.a.forwardRef((function(e,t){var a=e.classes,r=e.className,o=e.dividers,s=void 0!==o&&o,m=Object(l.a)(e,["classes","className","dividers"]);return c.a.createElement("div",Object(n.a)({className:Object(i.a)(a.root,r,s&&a.dividers),ref:t},m))}));t.a=Object(o.a)((function(e){return{root:{flex:"1 1 auto",padding:"8px 24px",WebkitOverflowScrolling:"touch",overflowY:"auto"},dividers:{borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(s)},967:function(e,t,a){"use strict";var n=a(2),l=a(5),r=a(0),c=a.n(r),i=(a(1),a(3)),o=a(8),s=a(143),m=c.a.forwardRef((function(e,t){var a=e.children,r=e.classes,o=e.className,m=e.disableTypography,f=void 0!==m&&m,u=Object(l.a)(e,["children","classes","className","disableTypography"]);return c.a.createElement("div",Object(n.a)({className:Object(i.a)(r.root,o),ref:t},u),f?a:c.a.createElement(s.a,{component:"h2",variant:"h6"},a))}));t.a=Object(o.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(m)},968:function(e,t,a){"use strict";var n=a(2),l=a(5),r=a(0),c=a.n(r),i=(a(1),a(3)),o=a(8),s=c.a.forwardRef((function(e,t){var a=e.disableSpacing,r=void 0!==a&&a,o=e.classes,s=e.className,m=Object(l.a)(e,["disableSpacing","classes","className"]);return c.a.createElement("div",Object(n.a)({className:Object(i.a)(o.root,s,!r&&o.spacing),ref:t},m))}));t.a=Object(o.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > * + *":{marginLeft:8}}},{name:"MuiDialogActions"})(s)}}]);