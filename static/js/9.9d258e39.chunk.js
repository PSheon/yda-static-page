(this["webpackJsonpyda-static-page"]=this["webpackJsonpyda-static-page"]||[]).push([[9],{1001:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(76),o=t(6),c=t(13),i=t(909),s=t.n(i),m=t(910),d=t(26),u=t(8),p=t(881),g=t(3),b=t(878),f=t(877),h=t(143),x=t(875),v=t(939),E=t(962),y=t(818),N=t(897),w=t.n(N),C=t(859),j=t(811),k=t(911),O=t(11),S=t(892),T=t(912),R=t.n(T),I=t(913),z=t.n(I),M=t(914),P=t.n(M),A=t(915),F=t.n(A),_=t(916),L=t.n(_),B=t(917),W=t.n(B);t(918),t(919);Object(k.registerPlugin)(R.a,L.a,z.a,P.a,F.a,W.a);var H=Object(u.a)({root:{"& label.Mui-focused":{color:"#fefefe"},"& .MuiInput-underline:after":{borderBottomColor:"#fefefe"},"& fieldset":{borderRadius:"2.4rem",borderColor:"#5e5e5e","&:hover":{borderColor:"#ffffff"}},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"2.4rem"}}})(x.a),U=Object(p.a)((function(e){return{tag:{transition:"background-color .3s, transform .3s"},red:{backgroundColor:"transparent",border:"2.5px solid #ef7c71","&.active, &:hover":{backgroundColor:"#ef7c71",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},orange:{backgroundColor:"transparent",border:"2.5px solid #f5bb67","&.active, &:hover":{backgroundColor:"#f5bb67",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},yellow:{backgroundColor:"transparent",border:"2.5px solid #fbe571","&.active, &:hover":{backgroundColor:"#fbe571",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},green:{backgroundColor:"transparent",border:"2.5px solid #80db7b","&.active, &:hover":{backgroundColor:"#80db7b",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},blue:{backgroundColor:"transparent",border:"2.5px solid #63a5f8","&.active, &:hover":{backgroundColor:"#63a5f8",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},purple:{backgroundColor:"transparent",border:"2.5px solid #cb8cf8","&.active, &:hover":{backgroundColor:"#cb8cf8",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},gray:{backgroundColor:"transparent",border:"2.5px solid #b4b4b8","&.active, &:hover":{backgroundColor:"#b4b4b8",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},dialogTextField:{"& label.Mui-focused":{color:"#3e3e3e"},"& .MuiInput-underline:after":{borderBottomColor:"#fefefe"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#5e5e5e"},"&:hover fieldset":{borderColor:"#3e3e3e"},"&.Mui-focused fieldset":{borderColor:"#3e3e3e"}},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"2.4rem"}},closeButton:{position:"absolute",right:5,top:"5px"},filePondWrapper:{opacity:".6",transition:"opacity .3s","& .filepond--root":{borderBottom:"none","& .filepond--drop-label":{color:"white",fontSize:"2em",fontWeight:"600"},"& .filepond--file-status":{fontSize:"2em"},"& .filepond--file-action-button":{fontSize:"2em"},"& .filepond--file-info-main":{fontSize:"2em"},"& .filepond--file-info-sub":{fontSize:"1.5em"}},"& .filepond--panel-root":{fontSize:"1.75em",backgroundColor:"transparent"},"&:hover, &.active":{opacity:"1",cursor:"pointer"}}}})),D=r.a.forwardRef((function(e,a){return r.a.createElement(y.a,Object.assign({direction:"up",ref:a},e))}));var G=function(e){var a=U(e),t=Object(o.b)(),i=Object(o.c)((function(e){return e.auth.user.data.displayName})),u=Object(n.useState)(!1),p=Object(d.a)(u,2),x=p[0],y=p[1],N=Object(n.useState)(null),T=Object(d.a)(N,2),R=T[0],I=T[1],z=Object(n.useState)([]),M=Object(d.a)(z,2),P=M[0],A=M[1];function F(){I(null),y(!1)}function _(e){var a=new Set(P);a.has(e)?a.delete(e):a.add(e),A(Array.from(a))}return r.a.createElement("div",{className:"flex flex-col flex-1 p-8 sm:p-12 relative"},r.a.createElement(S.a,{pageNames:["\u4e0a\u50b3\u7ba1\u7406","\u5716\u7247\u5217\u8868"]}),r.a.createElement("div",{className:"flex flex-1 items-end"},r.a.createElement(l.a,{delay:200},r.a.createElement("div",{className:"flex flex-1 "},r.a.createElement(h.a,{className:"pl-72 pb-12 text-16 sm:text-24"},r.a.createElement("span",{className:"flex items-center"},"\u4e0a\u50b3 ",r.a.createElement(C.a,null,"chevron_right")," \u5716\u7247\u5217\u8868")))),r.a.createElement(l.a,{animation:"transition.expandIn",delay:600},r.a.createElement(b.a,{color:"secondary","aria-label":"add",className:"absolute bottom-0 right-0 mr-24 sm:mr-16 -mb-28 z-999",onClick:function(){y(!0)}},r.a.createElement(C.a,null,"add"))),r.a.createElement(f.a,{classes:{paper:"rounded-12"},fullWidth:!0,fullScreen:!1,open:x,onClose:F,TransitionComponent:D},r.a.createElement(E.a,{id:"alert-dialog-title",disableTypography:!0,className:"text-center text-20 sm:text-24 font-semibold"},"\u4e0a\u50b3\u6211\u7684\u5716\u7247",r.a.createElement(j.a,{"aria-label":"Close",className:a.closeButton,onClick:F},r.a.createElement(w.a,null))),r.a.createElement(v.a,{className:"-mt-10"},r.a.createElement(l.a,null,r.a.createElement(h.a,{className:"mt-22 sm:mt-22 sm:py-12 text-14 sm:text-20 font-600 text-center pb-10",color:"inherit"},"\u76ee\u524d\u50c5\u652f\u63f4\u985e\u578b",r.a.createElement("br",null),r.a.createElement("span",{className:"text-blue"},"JPG\u3001PNG")," \u548c",r.a.createElement("span",{className:"text-blue"},"SVG")," \u7684\u5716\u7247")),null!==R&&r.a.createElement(l.b,{enter:{animation:"transition.expandIn"}},r.a.createElement(H,{className:"mb-24",label:"\u5716\u7247\u8aaa\u660e",id:"imageCaption",name:"imageCaption",value:R,onChange:function(e){return I(e.target.value)},variant:"outlined",fullWidth:!0}),r.a.createElement("div",{className:"flex justify-around items-center mb-24"},r.a.createElement("div",{onClick:function(){return _("red")},className:Object(g.a)(a.tag,a.red,P.includes("red")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-lg")}),r.a.createElement("div",{onClick:function(){return _("orange")},className:Object(g.a)(a.tag,a.orange,P.includes("orange")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-lg")}),r.a.createElement("div",{onClick:function(){return _("yellow")},className:Object(g.a)(a.tag,a.yellow,P.includes("yellow")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-lg")}),r.a.createElement("div",{onClick:function(){return _("green")},className:Object(g.a)(a.tag,a.green,P.includes("green")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-lg")}),r.a.createElement("div",{onClick:function(){return _("blue")},className:Object(g.a)(a.tag,a.blue,P.includes("blue")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-lg")}),r.a.createElement("div",{onClick:function(){return _("purple")},className:Object(g.a)(a.tag,a.purple,P.includes("purple")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-lg")}),r.a.createElement("div",{onClick:function(){return _("gray")},className:Object(g.a)(a.tag,a.gray,P.includes("gray")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-lg")}))),r.a.createElement("div",{className:Object(g.a)(a.filePondWrapper,"mb-12 rounded-12 border-3 border-dotted")},r.a.createElement(k.FilePond,{labelIdle:"\u9ede\u64ca \u6216 \u62d6\u66f3\u4f86 <span class='filepond--label-action'>\u4e0a\u50b3\u5716\u7247</span>",labelInvalidField:"\u8acb\u4e0a\u50b3\u5716\u7247",labelFileWaitingForSize:"\u6aa2\u67e5\u5716\u7247\u5927\u5c0f",labelFileSizeNotAvailable:"\u5716\u7247\u6a94\u6848\u592a\u5927\u4e86",labelFileLoading:"\u8f09\u5165\u4e2d",labelFileLoadError:"\u51fa\u932f\u4e86",labelFileProcessing:"\u4e0a\u50b3\u4e2d",labelFileProcessingComplete:"\u4e0a\u50b3\u5b8c\u6210",labelFileProcessingAborted:"\u4e0a\u50b3\u5df2\u53d6\u6d88",labelTapToCancel:"\u53d6\u6d88",labelTapToRetry:"\u91cd\u65b0\u4e0a\u50b3",labelButtonRemoveItem:"\u79fb\u9664\u5716\u7247",labelButtonProcessItem:"\u4e0a\u50b3",allowMultiple:!1,labelFileTypeNotAllowed:"\u4e0d\u652f\u63f4\u7684\u5716\u7247\u683c\u5f0f",acceptedFileTypes:["image/jpeg","image/png","image/svg+xml"],dropValidation:!0,maxFileSize:"12MB",imageCropAspectRatio:"1:1",instantUpload:!1,fileValidateTypeLabelExpectedTypesMap:{"image/jpeg":".jpg","image/png":".png","image/svg+xml":".svg"},onupdatefiles:function(){var e=Object(m.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("".concat(i,"_").concat(a[0].file.name));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),server:{url:"".concat(O.a,"/api/image"),timeout:7e3,process:function(e,a,n,r,l,o,i){var s=new FormData;s.append("imageData",a,a.name),s.append("imageName",a.name),s.append("imageTags",P),s.append("imageCaption",R),s.append("mimeType",a.type),s.append("imageHeight",n.size.height),s.append("imageWidth",n.size.width),s.append("imageSize",a.size);var m=new XMLHttpRequest;return m.open("POST","".concat(O.a,"/api/image")),m.setRequestHeader("Authorization","Bearer "+window.localStorage.getItem("jwt_access_token")),m.upload.onprogress=function(e){o(e.lengthComputable,e.loaded,e.total)},m.onload=function(){m.status>=200&&m.status<300?(r(m.responseText),t({type:c.a,payload:JSON.parse(m.responseText)}),t({type:c.e,options:{message:"\u5716\u7247\u4ef6\u4e0a\u50b3\u6210\u529f"}}),y(!1)):l("oh no")},m.send(s),{abort:function(){m.abort(),i()}}}}})),r.a.createElement(l.a,null,r.a.createElement(h.a,{className:"mt-22 sm:mt-22 sm:py-12 text-14 sm:text-20 font-600 text-center pb-10",color:"inherit"},"\u5927\u5c0f\u9650\u5236 ",r.a.createElement("span",{className:"text-blue"},"12 MB")))))))},J=t(937),V=t(961),X=t(935),$=t(936),q=t(883),Y=t(885),K=t(938),Q=t(891),Z=t.n(Q),ee=t(37),ae=t.n(ee),te=t(46),ne=t(60),re=t(292),le=t(389),oe=t(814),ce=t(860),ie=t(873),se=t(864);var me=function(e){var a=Object(n.useState)(null),t=Object(d.a)(a,2),l=t[0],o=t[1];function c(){o(null)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:"p-0","aria-owns":l?"selectedImagesMenu":null,"aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}},r.a.createElement(C.a,null,"more_horiz")),r.a.createElement(le.a,{id:"selectedImagesMenu",anchorEl:l,open:Boolean(l),onClose:c},r.a.createElement(oe.a,null,r.a.createElement(ce.a,{onClick:function(){c()}},r.a.createElement(ie.a,{className:"min-w-40"},r.a.createElement(C.a,null,"delete")),r.a.createElement(se.a,{primary:"\u522a\u9664"})))))},de=Object(p.a)((function(e){return{red:{backgroundColor:"#ef7c71"},orange:{backgroundColor:"#f5bb67"},yellow:{backgroundColor:"#fbe571"},green:{backgroundColor:"#80db7b"},blue:{backgroundColor:"#63a5f8"},purple:{backgroundColor:"#cb8cf8"},gray:{backgroundColor:"#b4b4b8"}}}));var ue=function(e){var a=de(e),t=Object(o.b)(),i=Object(o.c)((function(e){return e.uploads.image})),s=i.docs,m=i.selectedImageIds,u=i.selectedItemId,p=Object(n.useState)(!1),b=Object(d.a)(p,2),f=b[0],x=b[1];return s.length?r.a.createElement(l.b,{animation:"transition.slideUpIn",delay:300},r.a.createElement(J.a,null,r.a.createElement(V.a,null,r.a.createElement(X.a,null,r.a.createElement($.a,{className:"max-w-64 w-64 p-0 text-center"},r.a.createElement(q.a,{onClick:function(e){e.stopPropagation()},onChange:function(e){e.target.checked?t(c.C()):t(c.i())},checked:m.length===s.length&&m.length>0,indeterminate:m.length!==s.length&&m.length>0})),r.a.createElement($.a,{className:"text-center max-w-64 w-64 p-0"},m.length>0&&r.a.createElement(me,null)),r.a.createElement($.a,{className:"text-center sm:text-center"},"\u8aaa\u660e"),r.a.createElement($.a,{className:"text-center hidden md:table-cell"},"\u985e\u578b"),r.a.createElement($.a,{className:"text-center hidden sm:table-cell"},"\u4f5c\u8005"),r.a.createElement($.a,{className:"text-center hidden sm:table-cell"},"\u5c3a\u5bf8"),r.a.createElement($.a,{className:"text-center hidden md:table-cell"},"\u5927\u5c0f"),r.a.createElement($.a,{className:"text-center hidden sm:table-cell sm:text-left"},"\u4fee\u6539\u65e5\u671f"),r.a.createElement(Y.a,{lgUp:!0},r.a.createElement($.a,{className:"w-64 p-0 text-center"})))),r.a.createElement(K.a,null,Object.entries(s).map((function(n){var l=Object(d.a)(n,2),o=l[0],i=l[1];return r.a.createElement(X.a,{key:o,hover:!0,onClick:function(a){return n=i._id,t(c.H(n)),void e.pageLayout.current.toggleRightSidebar();var n},selected:i._id===u,className:"cursor-pointer"},r.a.createElement($.a,{className:"w-48 px-4 sm:px-12",padding:"checkbox"},r.a.createElement(q.a,{onClick:function(e){e.stopPropagation()},checked:m.includes(i._id),onChange:function(){return t(c.Y(i._id))}})),r.a.createElement($.a,{className:"min-w-64 w-88 p-0 text-center"},r.a.createElement("img",{className:"w-full block rounded-12 p-8",src:Object(te.f)(i.imageName),alt:i.imageName})),r.a.createElement($.a,{className:"text-left max-w-64 sm:max-w-128 truncate sm:text-center"},i.imageCaption),r.a.createElement($.a,{className:"text-center whitespace-no-wrap hidden md:table-cell"},function(e){switch(e){case"JPG":return r.a.createElement("img",{className:"w-40",src:"/assets/images/utils/jpg-icon.svg",alt:"jpg icon"});case"PNG":return r.a.createElement("img",{className:"w-40",src:"/assets/images/utils/png-icon.svg",alt:"PNG icon"});default:return r.a.createElement("img",{className:"w-40",src:"/assets/images/utils/svg-icon.svg",alt:"svg icon"})}}(Object(te.g)(i.mimeType))),r.a.createElement($.a,{className:"text-center whitespace-no-wrap hidden sm:table-cell"},i.author.displayName),r.a.createElement($.a,{className:"text-center whitespace-no-wrap hidden sm:table-cell"},i.imageHeight&&i.imageWidth?"".concat(i.imageHeight," X ").concat(i.imageWidth):"-"),r.a.createElement($.a,{className:"text-center whitespace-no-wrap hidden md:table-cell"},""===i.imageSize?"-":Object(te.b)(i.imageSize)),r.a.createElement($.a,{className:"text-center whitespace-no-wrap hidden sm:table-cell sm:text-left"},ae()(i.updatedAt).format("LL")),r.a.createElement(Y.a,{lgUp:!0},r.a.createElement($.a,null,r.a.createElement("div",{className:"flex justify-around items-center"},i.imageTags.map((function(e,t){return r.a.createElement("div",{key:e,className:Object(g.a)(a[e],0!==t&&"-ml-8","cursor-pointer w-24 h-24 rounded-full hover:shadow-xl")})}))))))})))),r.a.createElement(Z.a,null,(function(e){var a=e.isVisible;return r.a.createElement("div",{className:"flex justify-center items-center w-full min-h-10"},f&&r.a.createElement(re.a,{width:128,height:128}),a&&!f&&function(){if(i.hasNextPage){x(!0);var e={page:i.nextPage,limit:20,sort:"updatedAt",order:-1};ne.a.getUploadedImages(e).then((function(e){t({type:c.c,payload:e}),x(!1)}))}}())}))):i.loading?r.a.createElement("div",{className:"flex justify-center items-center h-full"},r.a.createElement(h.a,{variant:"h6",color:"textSecondary"},"\u5716\u7247\u6216\u8a31\u6703\u9072\u5230\uff0c\u4f46\u6c38\u4e0d\u7f3a\u5e2d\uff01")):r.a.createElement("div",{className:"flex justify-center items-center h-full"},r.a.createElement(h.a,{variant:"h6",color:"textSecondary"},"\u9084\u6c92\u6709\u5716\u7247\uff0c\u4e0a\u50b3\u7b2c\u4e00\u5f35\u5716\u7247\u5427\uff01"))},pe=t(411),ge=t(874),be=t(976),fe=t.n(be),he=t(974),xe=t.n(he);var ve=function(e){var a=Object(o.b)(),t=Object(o.c)((function(e){var a=e.uploads;return a.image.docs.find((function(e){return e._id===a.image.selectedItemId}))}));return t?r.a.createElement("div",{className:"flex flex-col justify-between h-full p-4 sm:p-12"},r.a.createElement("div",{className:"toolbar flex align-center justify-end"},r.a.createElement(l.a,{animation:"transition.expandIn",delay:200},r.a.createElement(ge.a,{title:"\u8907\u88fd\u5716\u7247\u7db2\u5740",TransitionComponent:pe.a,TransitionProps:{timeout:600},placement:"bottom",onClick:function(){xe()(Object(te.f)(t.imageName)),a(c.J({message:"\u5df2\u8907\u88fd\u5716\u7247\u7db2\u5740."}))}},r.a.createElement(j.a,{"aria-label":"Copy button"},r.a.createElement(fe.a,null)))),r.a.createElement(l.a,{animation:"transition.expandIn",delay:200},r.a.createElement(ge.a,{title:"\u4e0b\u8f09\u5716\u7247",TransitionComponent:pe.a,TransitionProps:{timeout:600},placement:"bottom"},r.a.createElement("a",{href:Object(te.f)(t.imageName),target:"_blank",rel:"noopener noreferrer"},r.a.createElement(j.a,null,r.a.createElement(C.a,null,"cloud_download"))))),r.a.createElement(l.a,{animation:"transition.expandIn",delay:200},r.a.createElement(ge.a,{title:"\u522a\u9664\u5716\u7247",TransitionComponent:pe.a,TransitionProps:{timeout:600},placement:"bottom",onClick:function(){a(c.n(t._id))}},r.a.createElement(j.a,null,r.a.createElement(C.a,null,"delete"))))),r.a.createElement("div",{className:"p-12"},r.a.createElement(l.a,{delay:200},r.a.createElement(h.a,{variant:"subtitle1",color:"inherit",className:"mb-8"},t.imageName)))):null},Ee=t(413),ye=t(226),Ne=t(805),we=t(858),Ce=t(862),je=t(894),ke=r.a.forwardRef((function(e,a){return r.a.createElement(y.a,Object.assign({direction:"up",ref:a},e))})),Oe=Object(Ee.a)({tag:{transition:"background-color .3s, transform .3s"},red:{backgroundColor:"transparent",border:"2.5px solid #ef7c71","&.active, &:hover":{backgroundColor:"#ef7c71",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},orange:{backgroundColor:"transparent",border:"2.5px solid #f5bb67","&.active, &:hover":{backgroundColor:"#f5bb67",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},yellow:{backgroundColor:"transparent",border:"2.5px solid #fbe571","&.active, &:hover":{backgroundColor:"#fbe571",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},green:{backgroundColor:"transparent",border:"2.5px solid #80db7b","&.active, &:hover":{backgroundColor:"#80db7b",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},blue:{backgroundColor:"transparent",border:"2.5px solid #63a5f8","&.active, &:hover":{backgroundColor:"#63a5f8",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},purple:{backgroundColor:"transparent",border:"2.5px solid #cb8cf8","&.active, &:hover":{backgroundColor:"#cb8cf8",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},gray:{backgroundColor:"transparent",border:"2.5px solid #b4b4b8","&.active, &:hover":{backgroundColor:"#b4b4b8",transform:"scale(1.3)",boxShadow:"0 15px 30px 0 rgba(0,0,0,0.11), 0 5px 15px 0 rgba(0,0,0,0.08)"}},noContent:{height:"20em"},table:{"& th":{padding:"16px 0"}},closeButton:{position:"absolute",right:5,top:"5px"}});var Se=function(e){var a=Oe(),t=Object(o.b)(),i=Object(ye.a)(),s=Object(o.c)((function(e){return e.uploads.image.loading})),m=Object(o.c)((function(e){var a=e.uploads;return a.image.docs.find((function(e){return e._id===a.image.selectedItemId}))})),u=Object(Ce.a)(i.breakpoints.down("xs")),p=Object(n.useState)(!1),b=Object(d.a)(p,2),y=b[0],N=b[1],k=Object(n.useState)(!1),O=Object(d.a)(k,2),S=O[0],T=O[1],R=Object(n.useState)(""),I=Object(d.a)(R,2),z=I[0],M=I[1];function P(){N(!1)}function A(e){var a=new Set(m.imageTags);a.has(e)?a.delete(e):a.add(e),t(c.db({imageId:m._id,imageCaption:m.imageCaption,imageTags:Array.from(a)}))}return m?r.a.createElement(l.a,{animation:"transition.slideUpIn",delay:200},r.a.createElement("div",{className:"file-details p-16 sm:p-24"},s&&r.a.createElement(je.a,{width:128,height:128}),r.a.createElement("div",{className:"preview h-128 sm:h-256 file-icon flex items-center justify-center"},r.a.createElement(l.a,{animation:"transition.expandIn",delay:300},u?r.a.createElement("img",{className:"h-full rounded-12 p-8 cursor-pointer",src:Object(te.f)(m.imageName),alt:m.imageName}):r.a.createElement("img",{className:"h-full rounded-12 p-8 cursor-pointer",src:Object(te.f)(m.imageName),alt:m.imageName,onClick:function(){N(!0)}}))),r.a.createElement(h.a,{variant:"subtitle1",className:"py-16"},"\u5716\u7247\u8cc7\u8a0a"),r.a.createElement("div",{className:"flex justify-start items-center"},r.a.createElement(Ne.a,{className:"mr-12",alt:"user avatar",src:Object(te.a)(m.author.photoURL)}),r.a.createElement("div",{className:"flex justify-around items-center w-full"},r.a.createElement("div",{onClick:function(){return A("red")},className:Object(g.a)(a.tag,a.red,m.imageTags.includes("red")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-xl")}),r.a.createElement("div",{onClick:function(){return A("orange")},className:Object(g.a)(a.tag,a.orange,m.imageTags.includes("orange")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-xl")}),r.a.createElement("div",{onClick:function(){return A("yellow")},className:Object(g.a)(a.tag,a.yellow,m.imageTags.includes("yellow")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-xl")}),r.a.createElement("div",{onClick:function(){return A("green")},className:Object(g.a)(a.tag,a.green,m.imageTags.includes("green")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-xl")}),r.a.createElement("div",{onClick:function(){return A("blue")},className:Object(g.a)(a.tag,a.blue,m.imageTags.includes("blue")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-xl")}),r.a.createElement("div",{onClick:function(){return A("purple")},className:Object(g.a)(a.tag,a.purple,m.imageTags.includes("purple")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-xl")}),r.a.createElement("div",{onClick:function(){return A("gray")},className:Object(g.a)(a.tag,a.gray,m.imageTags.includes("gray")&&"active","cursor-pointer w-24 h-24 rounded-full hover:shadow-xl")}))),r.a.createElement("table",{className:Object(g.a)(a.table,"w-full text-left")},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"min-w-84"},"\u8aaa\u660e"),r.a.createElement("td",{className:"h-64 max-w-192 cursor-pointer flex justify-start items-center"},S?r.a.createElement(x.a,{id:"imageCaption",label:"\u5716\u7247\u8aaa\u660e",autoFocus:!0,defaultValue:m.imageCaption,onChange:function(e){return M(e.target.value)},onBlur:function(e){return T(!1),void(z&&z!==m.imageCaption&&t(c.db({imageId:m._id,imageCaption:z,imageTags:m.imageTags})))},InputProps:{endAdornment:r.a.createElement(we.a,{position:"end",className:"cursor-pointer"},r.a.createElement(C.a,{className:"text-20",color:"action"},"editedit"))},margin:"dense"}):r.a.createElement(l.a,{animation:"transition.slideUpIn",delay:200},r.a.createElement(h.a,{variant:"body1",color:"inherit",className:"text-left w-full whitespace-pre-line flex justify-start items-center",onClick:function(){return T(!0)}},r.a.createElement(C.a,{className:"mr-8"},"edit"),m.imageCaption)))),r.a.createElement("tr",null,r.a.createElement("th",null,"\u985e\u578b"),r.a.createElement("td",null,function(e){switch(e){case"JPG":return r.a.createElement("img",{className:"w-32",src:"/assets/images/utils/jpg-icon.svg",alt:"jpg icon"});case"PNG":return r.a.createElement("img",{className:"w-32",src:"/assets/images/utils/png-icon.svg",alt:"PNG icon"});default:return r.a.createElement("img",{className:"w-32",src:"/assets/images/utils/svg-icon.svg",alt:"svg icon"})}}(Object(te.g)(m.mimeType)))),r.a.createElement("tr",null,r.a.createElement("th",null,"\u5c3a\u5bf8"),r.a.createElement("td",null,m.imageHeight&&m.imageWidth?Object(te.b)(m.imageSize):"-")),r.a.createElement("tr",null,r.a.createElement("th",null,"\u5927\u5c0f"),r.a.createElement("td",null,""===m.imageSize?"-":Object(te.b)(m.imageSize))),r.a.createElement("tr",null,r.a.createElement("th",null,"\u4f5c\u8005"),r.a.createElement("td",null,m.author.displayName)),r.a.createElement("tr",null,r.a.createElement("th",null,"\u66f4\u65b0\u65e5\u671f"),r.a.createElement("td",null,ae()(m.updatedAt).format("LLL"))))),r.a.createElement(f.a,{classes:{paper:"rounded-12"},maxWidth:"xl",fullWidth:!0,fullScreen:!1,open:y,onClose:P,TransitionComponent:ke},r.a.createElement(E.a,{id:"alert-dialog-title",disableTypography:!0,className:"text-center text-16 sm:text-24 font-semibold"},m.imageName,r.a.createElement(j.a,{"aria-label":"Close",className:a.closeButton,onClick:P},r.a.createElement(w.a,null))),r.a.createElement(v.a,{className:"flex justify-center items-center"},r.a.createElement(l.a,null,r.a.createElement("img",{className:"rounded-12 p-8 cursor-pointer",src:Object(te.f)(m.imageName),alt:m.imageName})))))):r.a.createElement("div",{className:Object(g.a)(a.noContent,"flex flex-col justify-center items-center")},r.a.createElement(C.a,{className:"text-128",color:"action"},"edit"),r.a.createElement(h.a,{variant:"subtitle1",className:"py-16"},"\u9078\u53d6\u5716\u7247\uff0c\u5373\u53ef\u67e5\u770b\u5176\u8a73\u7d30\u8cc7\u8a0a\u3002"))};a.default=function(){var e=Object(o.b)(),a=Object(n.useRef)(null);return Object(n.useEffect)((function(){e(c.W())}),[e]),r.a.createElement(l.n,{classes:{root:"bg-gray-300",header:"h-128 min-h-128 sm:h-160 sm:min-h-160",sidebarHeader:"h-140 min-h-128 sm:h-160 sm:min-h-160",rightSidebar:"w-320"},header:r.a.createElement(G,{pageLayout:a}),content:r.a.createElement(ue,{pageLayout:a}),rightSidebarHeader:r.a.createElement(ve,null),rightSidebarContent:r.a.createElement(Se,null),ref:a,innerScroll:!0})}},890:function(e,a,t){"use strict";var n=t(0),r=t.n(n).a.createContext();a.a=r},892:function(e,a,t){"use strict";var n=t(0),r=t.n(n),l=t(30),o=t(76),c=t(3),i=t(859),s=t(143);a.a=function(e){var a=e.pageNames||["\u6703\u54e1\u5831\u8868"],t=e.dense||!1,n=e.className||"";return t?r.a.createElement(o.b,{enter:{animation:"transition.expandIn"},className:Object(c.a)("flex items-center",n)},r.a.createElement(i.a,{className:"text-18 text-white"},"dashboard"),a.map((function(e){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement(i.a,{className:"text-16 text-white"},"chevron_right"),r.a.createElement(s.a,{className:"text-white"},e))}))):r.a.createElement(o.b,{enter:{animation:"transition.expandIn"},className:Object(c.a)("flex items-center my-16 sm:mb-0 pl-12",n)},r.a.createElement(l.a,{to:"/staff/dashboard",role:"button",className:"flex justify-center items-center text-white"},r.a.createElement(i.a,{className:"text-24 text-white"},"dashboard")),a.map((function(e){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement(i.a,null,"chevron_right"),r.a.createElement(s.a,{className:"text-24 text-white"},e))})))}},894:function(e,a,t){"use strict";var n=t(0),r=t.n(n),l=t(76);a.a=function(e){var a=e.width,t=void 0===a?128:a,n=e.height,o=void 0===n?128:n;return r.a.createElement(l.a,{animation:"transition.slideUpIn",delay:200},r.a.createElement("div",{className:"w-full h-full absolute flex justify-center items-center bg-loading-overlay z-10"},r.a.createElement("svg",{width:t,height:o,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"lds-ellipsis",style:{background:"none"}},r.a.createElement("circle",{cx:84,cy:50,r:0,fill:"#32a0da"},r.a.createElement("animate",{attributeName:"r",values:"10;0;0;0;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"0s"}),r.a.createElement("animate",{attributeName:"cx",values:"84;84;84;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"0s"})),r.a.createElement("circle",{cx:16,cy:50,r:"0.997615",fill:"#7fbb42"},r.a.createElement("animate",{attributeName:"r",values:"0;10;10;10;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"-0.5s"}),r.a.createElement("animate",{attributeName:"cx",values:"16;16;50;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"-0.5s"})),r.a.createElement("circle",{cx:84,cy:50,r:"9.00238",fill:"#fdb813"},r.a.createElement("animate",{attributeName:"r",values:"0;10;10;10;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"-0.25s"}),r.a.createElement("animate",{attributeName:"cx",values:"16;16;50;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"-0.25s"})),r.a.createElement("circle",{cx:"53.3919",cy:50,r:10,fill:"#f05125"},r.a.createElement("animate",{attributeName:"r",values:"0;10;10;10;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"0s"}),r.a.createElement("animate",{attributeName:"cx",values:"16;16;50;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"0s"})),r.a.createElement("circle",{cx:"19.3919",cy:50,r:10,fill:"#32a0da"},r.a.createElement("animate",{attributeName:"r",values:"0;0;10;10;10",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"0s"}),r.a.createElement("animate",{attributeName:"cx",values:"16;16;16;50;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"0s"})))))}},895:function(e,a,t){"use strict";var n=t(0),r=t.n(n).a.createContext();a.a=r},935:function(e,a,t){"use strict";var n=t(2),r=t(5),l=t(0),o=t.n(l),c=(t(1),t(3)),i=t(8),s=t(890),m=o.a.forwardRef((function(e,a){var t=e.classes,l=e.className,i=e.component,m=void 0===i?"tr":i,d=e.hover,u=void 0!==d&&d,p=e.selected,g=void 0!==p&&p,b=Object(r.a)(e,["classes","className","component","hover","selected"]),f=o.a.useContext(s.a);return o.a.createElement(m,Object(n.a)({ref:a,className:Object(c.a)(t.root,l,f&&{head:t.head,footer:t.footer}[f.variant],u&&t.hover,g&&t.selected)},b))}));a.a=Object(i.a)((function(e){return{root:{color:"inherit",display:"table-row",verticalAlign:"middle",outline:"none","&$selected":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.04)":"rgba(255, 255, 255, 0.08)"},"&$hover:hover":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.07)":"rgba(255, 255, 255, 0.14)"}},selected:{},hover:{},head:{},footer:{}}}),{name:"MuiTableRow"})(m)},936:function(e,a,t){"use strict";var n=t(5),r=t(2),l=t(0),o=t.n(l),c=(t(1),t(3)),i=t(8),s=t(14),m=t(23),d=t(895),u=t(890),p=o.a.forwardRef((function(e,a){var t,l=e.align,i=void 0===l?"inherit":l,m=e.classes,p=e.className,g=e.component,b=e.padding,f=e.scope,h=e.size,x=e.sortDirection,v=e.variant,E=Object(n.a)(e,["align","classes","className","component","padding","scope","size","sortDirection","variant"]),y=o.a.useContext(d.a),N=o.a.useContext(u.a);t=g||(N&&"head"===N.variant?"th":"td");var w=f;!w&&N&&"head"===N.variant&&(w="col");var C=b||(y&&y.padding?y.padding:"default"),j=h||(y&&y.size?y.size:"medium"),k=null;return x&&(k="asc"===x?"ascending":"descending"),o.a.createElement(t,Object(r.a)({ref:a,className:Object(c.a)(m.root,p,(v?"head"===v:N&&"head"===N.variant)&&m.head,(v?"body"===v:N&&"body"===N.variant)&&m.body,(v?"footer"===v:N&&"footer"===N.variant)&&m.footer,"inherit"!==i&&m["align".concat(Object(s.a)(i))],"default"!==C&&m["padding".concat(Object(s.a)(C))],"medium"!==j&&m["size".concat(Object(s.a)(j))]),"aria-sort":k,scope:w},E))}));a.a=Object(i.a)((function(e){return{root:Object(r.a)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===e.palette.type?Object(m.e)(Object(m.c)(e.palette.divider,1),.88):Object(m.a)(Object(m.c)(e.palette.divider,1),.68)),textAlign:"left",padding:"14px 40px 14px 16px","&:last-child":{paddingRight:16}}),head:{color:e.palette.text.secondary,fontSize:e.typography.pxToRem(12),lineHeight:e.typography.pxToRem(21),fontWeight:e.typography.fontWeightMedium},body:{color:e.palette.text.primary,fontWeight:e.typography.fontWeightRegular},footer:{color:e.palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},sizeSmall:{padding:"6px 24px 6px 16px","&:last-child":{paddingRight:16},"&$paddingCheckbox":{width:24,padding:"0px 12px 0 16px","&:last-child":{paddingLeft:12,paddingRight:16},"& > *":{padding:0}}},paddingCheckbox:{width:48,padding:"0 0 0 4px","&:last-child":{paddingLeft:0,paddingRight:4}},paddingNone:{padding:0,"&:last-child":{padding:0}},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right",flexDirection:"row-reverse"},alignJustify:{textAlign:"justify"}}}),{name:"MuiTableCell"})(p)},937:function(e,a,t){"use strict";var n=t(2),r=t(5),l=t(0),o=t.n(l),c=(t(1),t(3)),i=t(8),s=t(895),m=o.a.forwardRef((function(e,a){var t=e.classes,l=e.className,i=e.component,m=void 0===i?"table":i,d=e.padding,u=void 0===d?"default":d,p=e.size,g=void 0===p?"medium":p,b=Object(r.a)(e,["classes","className","component","padding","size"]),f=o.a.useMemo((function(){return{padding:u,size:g}}),[u,g]);return o.a.createElement(s.a.Provider,{value:f},o.a.createElement(m,Object(n.a)({ref:a,className:Object(c.a)(t.root,l)},b)))}));a.a=Object(i.a)({root:{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0}},{name:"MuiTable"})(m)},938:function(e,a,t){"use strict";var n=t(2),r=t(5),l=t(0),o=t.n(l),c=(t(1),t(3)),i=t(8),s=t(890),m={variant:"body"},d=o.a.forwardRef((function(e,a){var t=e.classes,l=e.className,i=e.component,d=void 0===i?"tbody":i,u=Object(r.a)(e,["classes","className","component"]);return o.a.createElement(s.a.Provider,{value:m},o.a.createElement(d,Object(n.a)({className:Object(c.a)(t.root,l),ref:a},u)))}));a.a=Object(i.a)({root:{display:"table-row-group"}},{name:"MuiTableBody"})(d)},961:function(e,a,t){"use strict";var n=t(2),r=t(5),l=t(0),o=t.n(l),c=(t(1),t(3)),i=t(8),s=t(890),m={variant:"head"},d=o.a.forwardRef((function(e,a){var t=e.classes,l=e.className,i=e.component,d=void 0===i?"thead":i,u=Object(r.a)(e,["classes","className","component"]);return o.a.createElement(s.a.Provider,{value:m},o.a.createElement(d,Object(n.a)({className:Object(c.a)(t.root,l),ref:a},u)))}));a.a=Object(i.a)({root:{display:"table-header-group"}},{name:"MuiTableHead"})(d)},974:function(e,a,t){"use strict";var n=t(975),r="Copy to clipboard: #{key}, Enter";e.exports=function(e,a){var t,l,o,c,i,s,m=!1;a||(a={}),t=a.debug||!1;try{if(o=n(),c=document.createRange(),i=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(t){t.stopPropagation(),a.format&&(t.preventDefault(),t.clipboardData.clearData(),t.clipboardData.setData(a.format,e))})),document.body.appendChild(s),c.selectNodeContents(s),i.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");m=!0}catch(d){t&&console.error("unable to copy using execCommand: ",d),t&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(a.format||"text",e),m=!0}catch(d){t&&console.error("unable to copy using clipboardData: ",d),t&&console.error("falling back to prompt"),l=function(e){var a=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,a)}("message"in a?a.message:r),window.prompt(l,e)}}finally{i&&("function"==typeof i.removeRange?i.removeRange(c):i.removeAllRanges()),s&&document.body.removeChild(s),o()}return m}},975:function(e,a){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var a=document.activeElement,t=[],n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));switch(a.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":a.blur();break;default:a=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||t.forEach((function(a){e.addRange(a)})),a&&a.focus()}}},976:function(e,a,t){"use strict";var n=t(415);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),l=(0,n(t(888)).default)(r.default.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"}),"FileCopy");a.default=l}}]);